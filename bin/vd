#!/bin/bash
#
# Like gvimdiff, but:
# - Sets read-only by default.
# - Can diff multiple pairs of files.
# - Disables folding. I hate diff folding.
# - Sets window role and exits workspace to play nice with my i3 setup.
# - Uses MacVim on Macs.

exec v -R \
  --role "gvimdiff" \
  -c 'silent call TabMultiDiffArgs()' \
  -c 'tabdo windo set nofoldenable foldcolumn=0' \
  -c 'tabfirst' \
  -c 'autocmd VimEnter * silent! call EquilizeAllTabWindows()' \
  -c 'autocmd VimLeavePre * silent! !i3-msg "workspace prev_on_output"' \
  "$@"
